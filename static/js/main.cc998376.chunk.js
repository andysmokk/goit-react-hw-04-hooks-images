(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__FF1-w",title:"ImageGallery_title__2UkS1"}},11:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2IjDc",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__1YBuU"}},12:function(e,t,a){e.exports={Overlay:"Modal_Overlay__wo4vi",Modal:"Modal_Modal__2ZAdq"}},14:function(e,t,a){e.exports={Button:"ButtonLoadMore_Button__1FRcQ"}},16:function(e,t,a){e.exports={loader:"LoaderSpinner_loader__3LvQr"}},21:function(e,t,a){},23:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),o=a(5),r=a.n(o),i=(a(21),a(3)),s=a(4),l=(a(22),a(23),a(6)),u=a.n(l),m=a(1);function j(e){var t=e.onSubmit,a=Object(c.useState)(""),n=Object(i.a)(a,2),o=n[0],r=n[1];return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("header",{className:u.a.Searchbar,children:Object(m.jsxs)("form",{className:u.a.SearchForm,onSubmit:function(e){if(e.preventDefault(),""===o.trim())return s.c.info("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438!");t(o),r("")},children:[Object(m.jsx)("button",{type:"submit",className:u.a.SearchFormButton,children:Object(m.jsx)("span",{className:u.a.SearchFormButtonLabel,children:"Search"})}),Object(m.jsx)("input",{name:"imageName",value:o,className:u.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){var t=e.target;r(t.value)}})]})})})}var b=a(13),h=a(10),d=a.n(h),f=a(11),g=a.n(f);function O(e){var t=e.images;return Object(m.jsx)(m.Fragment,{children:t&&t.map((function(e){return Object(m.jsx)("li",{className:g.a.ImageGalleryItem,children:Object(m.jsx)("img",{src:e.webformatURL,alt:e.tags,className:g.a.ImageGalleryItemImage,"data-image":e.largeImageURL})},e.id)}))})}var _={fetchImages:function(e,t){return fetch("".concat("https://pixabay.com/api/","?q=").concat(e,"&page=").concat(t,"&key=").concat("23025169-5a1370e5bf826cff1ac1e8732","&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.json()}))}},p=a(14),S=a.n(p),x=a(15),I=a.n(x),v=a(16),y=a.n(v),F=function(){return Object(m.jsx)("div",{className:y.a.loader,children:Object(m.jsx)(I.a,{type:"Bars",color:"#3f51b5",height:200,width:200,timeout:1500})})};function N(e){var t=e.imageName,a=e.loadMore,n=Object(c.useState)(1),o=Object(i.a)(n,2),r=o[0],l=o[1],u=Object(c.useState)(!1),j=Object(i.a)(u,2),b=j[0],h=j[1];return Object(m.jsx)("button",{type:"button",className:S.a.Button,onClick:function(){h(!0),setTimeout((function(){_.fetchImages(t,r+1).then((function(e){0===e.hits.length?s.c.info("\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c ".concat('"'.concat(t,'"')," \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0438\u0441\u044c. \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435.")):a(e.hits)})).then(l(r+1)).catch((function(e){return console.log(e)})).finally((function(){return h(!1)}))}),1e3)},children:b?Object(m.jsx)(F,{}):Object(m.jsx)("p",{children:"Load more"})})}var B="idle",G="pending",M="resolved";function w(e){var t=e.imageName,a=e.onOpenModal,n=Object(c.useState)([]),o=Object(i.a)(n,2),r=o[0],l=o[1],u=Object(c.useState)(1),j=Object(i.a)(u,1)[0],h=Object(c.useState)(B),f=Object(i.a)(h,2),g=f[0],p=f[1];Object(c.useEffect)((function(){t&&(p(G),setTimeout((function(){_.fetchImages(t,j).then((function(e){e.hits.length>0?(l(e.hits),p(M)):s.c.info("\u041a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c ".concat('"'.concat(t,'"')," \u043d\u0435\u0442. \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435."))})).catch((function(e){return console.log(e)}))}),1e3))}),[t,j]),Object(c.useEffect)((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}));return g===B?Object(m.jsx)("h2",{className:d.a.title,children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438"}):g===G?Object(m.jsx)(F,{}):g===M?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("ul",{className:d.a.ImageGallery,onClick:a,children:Object(m.jsx)(O,{images:r})}),r.length>0&&Object(m.jsx)(N,{images:r,imageName:t,loadMore:function(e){l([].concat(Object(b.a)(r),Object(b.a)(e)))}})]}):void 0}var k=a(12),L=a.n(k),C=document.querySelector("#modal-root");function E(e){var t=e.children,a=e.onCloseModal;Object(c.useEffect)((function(){return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}));var n=function(e){"Escape"===e.code&&a()};return Object(o.createPortal)(Object(m.jsx)("div",{className:L.a.Overlay,onClick:function(e){e.target===e.currentTarget&&a()},children:Object(m.jsx)("div",{className:L.a.Modal,children:t})}),C)}function T(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),a=t[0],n=t[1],o=Object(c.useState)(!1),r=Object(i.a)(o,2),l=r[0],u=r[1],b=Object(c.useState)(""),h=Object(i.a)(b,2),d=h[0],f=h[1];return Object(m.jsxs)("div",{className:"App",children:[l&&Object(m.jsx)(E,{onCloseModal:function(){u(!l)},children:Object(m.jsx)("img",{src:d,alt:"",width:"950"})}),Object(m.jsx)(j,{onSubmit:function(e){n(e)}}),Object(m.jsx)(w,{imageName:a,onOpenModal:function(e){var t=e.target;"IMG"===t.nodeName&&(f(t.dataset.image),u(!l))}}),Object(m.jsx)(s.a,{autoClose:3e3,position:"bottom-right",transition:s.b})]})}r.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(T,{})}),document.getElementById("root"))},6:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__3sPRp",SearchForm:"Searchbar_SearchForm__2qCZz",SearchFormButton:"Searchbar_SearchFormButton__ei_t2",SearchFormBbutton:"Searchbar_SearchFormBbutton__3nYvT",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__25NaT",SearchFormInput:"Searchbar_SearchFormInput__dI9Wx"}}},[[45,1,2]]]);
//# sourceMappingURL=main.cc998376.chunk.js.map